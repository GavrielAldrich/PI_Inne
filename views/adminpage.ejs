<%- include ("partials/header.ejs") %>

<section class="produk" id="produk">
  <div class="produk">
    <h1 class="heading"><span> Data </span> Produk</h1>
    <div class="produk-container">
      <div class="produk-card">
        <div class="produk-content">
            <div style="margin-bottom: 20px;">          
              <a href="/orderview">Kelola Orderan</a>
                <a href="/tambahproduk">Tambah Produk</a>
            </div>
          <!-- Link to add new item -->
          <table class="table1" style="margin: 0 auto; width: 80%;">
            <tr>
              <th>No</th>
              <th>Kategori</th>
              <th>Nama Produk</th>
              <th>Harga</th>
              <th>Desc Produk</th>
              <th>Gambar</th>
              <th>Aksi</th>
            </tr>
            <% products.forEach((product, index) => { %>
            <tr>
              <td><%= index + 1 %></td>
              <td><%= product.product_type %></td>
              <td><%= product.product_name %></td>
              <td>Rp. <%= (() => { 
                let formattedTotalHarga = product.product_price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
                return formattedTotalHarga;
              })() %></td>
              <td><%= product.product_desc %></td>
              <td>
                <img
                  src="/images/<%= product.product_image %>"
                  alt="Product Image"
                  style="max-width: 100px;"
                />
              </td>
              <td>
                <a href="/editproduk/<%= product.id %>">Edit</a>
                <a href="/delete/<%= product.id %>">Delete</a>
              </td>
            </tr>
            <% }); %>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>

</body>
</html>
